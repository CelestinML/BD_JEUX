CREATE OR REPLACE TRIGGER NOUVEAUSUCCESENCOURS_TRG 
AFTER INSERT ON SUCCES_EN_COURS 
DECLARE
    CURSOR succes_realises IS
    SELECT IDSUCCES
    FROM SUCCES_REALISE
    WHERE ((NOJOUEUR = NEW.NOJOUEUR) AND (IDCONTENU = NEW.IDCONTENU));
BEGIN
    IF NEW.IDSUCCES IN succes_realises THEN
        DELETE FROM SUCCES_EN_COURS
        WHERE ((IDCONTENU = NEW.IDCONTENU) AND (NOJOUEUR = NEW.NOJOUEUR) AND (IDSUCCES = NEW.IDSUCCES));
    END IF;
END;